apiVersion: helm.toolkit.fluxcd.io/v2beta2
kind: HelmRelease
metadata:
  name: sciety--demo
spec:
  releaseName: sciety--demo
  interval: 5m
  chart:
    spec:
      chart: helm/sciety
      sourceRef:
        kind: GitRepository
        name: sciety
      interval: 1m
  install:
    remediation:
      retries: 3
  upgrade:
    remediation:
      retries: 3
  valuesFrom:
    - kind: Secret
      name: sciety--demo--secret-env-vars
      valuesKey: CROSSREF_API_BEARER_TOKEN
      targetPath: crossrefApiBearerToken
    - kind: Secret
      name: sciety--demo--secret-env-vars
      valuesKey: SCIETY_TEAM_API_BEARER_TOKEN
      targetPath: ingestionAuthBearerToken
    - kind: Secret
      name: sciety--demo--secret-env-vars
      valuesKey: APP_SECRET
      targetPath: appSecret
    - kind: Secret
      name: sciety--demo--secret-env-vars
      valuesKey: AUTH0_CLIENT_ID
      targetPath: auth0ClientId
    - kind: Secret
      name: sciety--demo--secret-env-vars
      valuesKey: AUTH0_CLIENT_SECRET
      targetPath: auth0ClientSecret
    - kind: Secret
      name: sciety--demo--secret-env-vars
      valuesKey: AUTH0_DOMAIN
      targetPath: auth0Domain
    - kind: Secret
      name: sciety--demo--secret-env-vars
      valuesKey: AUTH0_CALLBACK_URL
      targetPath: auth0CallbackUrl
    - kind: Secret
      name: sciety--demo--secret-env-vars
      valuesKey: PRELIGHTS_FEED_KEY
      targetPath: prelightsFeedKey
    - kind: Secret
      name: sciety--demo--secret-env-vars
      valuesKey: healthchecksPingKey
      targetPath: healthchecksPingKey
  values:
    hostname: sciety-demo.elifesciences.org
    images:
      frontend:
        tag: 3f4498411b84043a31dfe33ad172825ea50bc551
    experimentEnabled: ""
    appCache: redis
    googleTagManagerId: ""
    enableEventsExportToS3: false
    certManagerClusterIssuer: letsencrypt-prod
